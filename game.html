<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Arbeidskrav 1!</title>
    <link rel="stylesheet" href="game.css" />
  </head>
  <!-- HTML KODEN TRENGER DU IKKE RØRE FOR Å LØSE OPPGAVENE. -->

  <body>
    <div class="main-container">
      <!-- Healthbars til heroene -->
      <div class="hero-health-containers">
        <div class="healthbar-container">
          <!-- healer-health sin vidde må forandres for å endre lifebar -->
          <div class="healthbar healer-health"></div>
          <div class="text-container">
            <p id="healer-name-txt">Healerens navn</p>
            <p id="healer-health-txt">400 / 400 HP</p>
          </div>
        </div>
        <div class="healthbar-container">
          <!-- archer-health sin vidde må forandres for å endre lifebar -->
          <div class="healthbar archer-health"></div>
          <div class="text-container">
            <p id="archer-name-txt">Archerens navn</p>
            <p id="archer-health-txt">600 / 600 HP</p>
          </div>
        </div>
        <div class="healthbar-container">
          <!-- warrior-health sin vidde må forandres for å endre lifebar -->
          <div class="healthbar warrior-health"></div>
          <div class="text-container">
            <p id="warrior-name-txt">Warriorens navn</p>
            <p id="warrior-health-txt">800 / 800 HP</p>
          </div>
        </div>
      </div>

      <!-- Healthbar til fienden -->
      <div class="dragon-health-container">
        <div class="healthbar-container">
          <!-- dragon-health sin vidde må forandres for å endre lifebar -->
          <div class="healthbar dragon-health"></div>
          <div class="text-container">
            <p id="dragon-name-txt">Dragens navn</p>
            <div class="text-container dragon-health-txt">2000 / 2000 HP</div>
          </div>
        </div>
      </div>

      <!-- Bildecontainere for heroene -->
      <div class="img-container healer">
        <img class="hero" src="assets/healer.png" />
      </div>
      <div class="img-container archer">
        <img class="hero" src="assets/archer.png" />
      </div>
      <div class="img-container warrior">
        <img class="hero" src="assets/warrior.png" />
      </div>

      <!-- Bildecontainer for fienden -->
      <div class="enemy-container">
        <div class="img-container dragon-container">
          <img class="dragon" src="assets/dragon.png" />
        </div>
      </div>
    </div>
    <script>
      //Denne JS-koden er laget klar for deg. Den trenger du ikke endre på.

      //Stats for heroes
      let heroesArray = [
        {
          id: 0,
          name: "Henriette Healer",
          maxHP: 400,
          currentHP: 400,
          damage: 100,
          alive: true,
        },
        {
          id: 1,
          name: "Ariana archer",
          maxHP: 600,
          currentHP: 600,
          damage: 400,
          alive: true,
        },
        {
          id: 2,
          name: "Wyona Warrior",
          maxHP: 800,
          currentHP: 800,
          damage: 400,
          alive: true,
        },
      ];

      let dragonObject = {
        name: "Daar Dragon",
        maxHP: 2000,
        currentHP: 2000,
        damage: 200,
        alive: true,
      };
      //JEG PRØVER MEG PÅ OPPGAVE 1// forEach, Find

      const heroPictures = document.getElementsByClassName("hero");

      heroPictures[0].addEventListener("click", healerClick);
      heroPictures[1].addEventListener("click", archerClick);
      heroPictures[2].addEventListener("click", warriorClick);

      //Functions when you click on the heroes

      function healerClick() {
        alert(
          `${heroesArray[0].name} har gjort ${heroesArray[0].damage} skade på ${dragonObject.name} `
        );
        dragonObject.currentHP -= heroesArray[0].damage;
        updateDragonHP();
      }

      function archerClick() {
        alert(
          `${heroesArray[1].name} har gjort ${heroesArray[1].damage} skade på ${dragonObject.name} `
        );
        dragonObject.currentHP -= heroesArray[1].damage;
        updateDragonHP();
      }

      function warriorClick() {
        alert(
          `${heroesArray[2].name} har gjort ${heroesArray[2].damage} skade på ${dragonObject.name} `
        );
        dragonObject.currentHP -= heroesArray[2].damage;
        updateDragonHP();
      }

      //Functions that updates the dragons HP

      function updateDragonHP() {
        const dragonText = document.getElementsByClassName(
          "text-container dragon-health-txt"
        );
        dragonText[0].innerHTML = `${dragonObject.currentHP} / 2000 HP `;

        let dragonHealthBar = document.getElementsByClassName("dragon-health");
        dragonHealthBar[0].style.width = `${0.15 * dragonObject.currentHP}px`;
        dragonAttack();
      }

      //Random attack from dragon
      function dragonAttack() {
        let randomDragonAttackGenerator = Math.floor(
          Math.random() * heroesArray.length
        );

        let heroAttacked = heroesArray[randomDragonAttackGenerator];

        if (heroAttacked.alive == true) {
          heroAttacked.currentHP -= 200;

          if (heroAttacked.name.includes("Healer")) {
            const healerText = document.getElementById("healer-health-txt");
            healerText.innerHTML = `${heroAttacked.currentHP} / 400 HP `;
            if (heroAttacked.currentHP <= 0) {
              heroAttacked.alive = false;
              heroPictures[0].style.display = "none";
            }
          } else if (heroAttacked.name.includes("archer")) {
            const archerText = document.getElementById("archer-health-txt");
            archerText.innerHTML = `${heroAttacked.currentHP} / 600 HP `;
            if (heroAttacked.currentHP <= 0) {
              heroAttacked.alive = false;
              heroPictures[1].style.display = "none";
            }
          } else if (heroAttacked.name.includes("Warrior")) {
            const warriorText = document.getElementById("warrior-health-txt");
            warriorText.innerHTML = `${heroAttacked.currentHP} / 800 HP `;
            if (heroAttacked.currentHP <= 0) {
              heroAttacked.alive = false;
              heroPictures[2].style.display = "none";
            }
          }
          alert(`${dragonObject.name} har angrepet ${heroAttacked.name} `);
         
        }
      }
    </script>
  </body>
</html>
